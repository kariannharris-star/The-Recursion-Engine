[gd_scene load_steps=28 format=3 uid="uid://room1_1_3d"]

[ext_resource type="PackedScene" uid="uid://player3d001" path="res://scenes/player/player_3d.tscn" id="1_player"]
[ext_resource type="Script" path="res://scripts/objects/pushable_block_3d.gd" id="2_block"]
[ext_resource type="Script" path="res://scripts/objects/glyph_fountain.gd" id="3_fountain"]

; === COLLISION SHAPES ===
[sub_resource type="BoxShape3D" id="BoxShape3D_floor"]
size = Vector3(12, 0.5, 10)

[sub_resource type="BoxShape3D" id="BoxShape3D_wall_back"]
size = Vector3(14, 6, 0.8)

[sub_resource type="BoxShape3D" id="BoxShape3D_wall_side"]
size = Vector3(0.8, 6, 10)

[sub_resource type="BoxShape3D" id="BoxShape3D_pillar"]
size = Vector3(1.2, 4, 1.2)

[sub_resource type="BoxShape3D" id="BoxShape3D_boulder"]
size = Vector3(1.5, 1.2, 1.5)

[sub_resource type="BoxShape3D" id="BoxShape3D_block"]
size = Vector3(0.8, 0.8, 0.8)

[sub_resource type="CylinderShape3D" id="CylinderShape3D_pool"]
radius = 2.0
height = 0.6

[sub_resource type="BoxShape3D" id="BoxShape3D_archway"]
size = Vector3(3, 4, 0.5)

; === MATERIALS - Ancient Temple Stone ===
[sub_resource type="StandardMaterial3D" id="Mat_floor"]
albedo_color = Color(0.15, 0.13, 0.12, 1)
roughness = 0.95
metallic = 0.0

[sub_resource type="StandardMaterial3D" id="Mat_wall"]
albedo_color = Color(0.2, 0.18, 0.16, 1)
roughness = 0.85
metallic = 0.05

[sub_resource type="StandardMaterial3D" id="Mat_pillar"]
albedo_color = Color(0.25, 0.22, 0.2, 1)
roughness = 0.75
metallic = 0.1

[sub_resource type="StandardMaterial3D" id="Mat_boulder"]
albedo_color = Color(0.3, 0.28, 0.25, 1)
roughness = 0.9
metallic = 0.0

; === MATERIALS - Divine Beast Glow (Cyan/Teal) ===
[sub_resource type="StandardMaterial3D" id="Mat_portal_glow"]
albedo_color = Color(0.2, 0.8, 0.9, 1)
emission_enabled = true
emission = Color(0.1, 0.7, 0.85, 1)
emission_energy_multiplier = 4.0
metallic = 0.3
roughness = 0.2

[sub_resource type="StandardMaterial3D" id="Mat_circuit_glow"]
albedo_color = Color(0.15, 0.65, 0.8, 1)
emission_enabled = true
emission = Color(0.1, 0.6, 0.75, 1)
emission_energy_multiplier = 2.5
metallic = 0.4
roughness = 0.3

[sub_resource type="StandardMaterial3D" id="Mat_circuit_dim"]
albedo_color = Color(0.1, 0.4, 0.5, 1)
emission_enabled = true
emission = Color(0.05, 0.3, 0.4, 1)
emission_energy_multiplier = 1.0
metallic = 0.3
roughness = 0.4

[sub_resource type="StandardMaterial3D" id="Mat_water"]
albedo_color = Color(0.1, 0.35, 0.45, 0.85)
emission_enabled = true
emission = Color(0.05, 0.25, 0.35, 1)
emission_energy_multiplier = 0.8
metallic = 0.6
roughness = 0.1
transparency = 1

[sub_resource type="StandardMaterial3D" id="Mat_pool_rim"]
albedo_color = Color(0.18, 0.16, 0.14, 1)
roughness = 0.7
metallic = 0.15

[sub_resource type="StandardMaterial3D" id="Mat_arch"]
albedo_color = Color(0.22, 0.2, 0.18, 1)
roughness = 0.8
metallic = 0.1

[sub_resource type="StandardMaterial3D" id="Mat_block"]
albedo_color = Color(0.35, 0.3, 0.25, 1)
roughness = 0.85
metallic = 0.05

; === MESHES ===
[sub_resource type="BoxMesh" id="Mesh_floor"]
size = Vector3(12, 0.5, 10)

[sub_resource type="BoxMesh" id="Mesh_wall_back"]
size = Vector3(14, 6, 0.8)

[sub_resource type="BoxMesh" id="Mesh_wall_side"]
size = Vector3(0.8, 6, 10)

[sub_resource type="CylinderMesh" id="Mesh_pillar"]
top_radius = 0.5
bottom_radius = 0.6
height = 4.0
radial_segments = 8

[sub_resource type="SphereMesh" id="Mesh_boulder"]
radius = 0.8
height = 1.2

; === ROOM SCRIPT ===
[sub_resource type="GDScript" id="GDScript_room"]
script/source = "extends Node3D

func _ready() -> void:
	print(\"═══════════════════════════════════════\")
	print(\"  ROOM 1-1: THE AWAKENING CHAMBER\")
	print(\"═══════════════════════════════════════\")
	print(\"Ancient mechanisms hum with dormant power...\")
	print(\"A glowing archway beckons forward.\")
	print(\"\")

	await get_tree().create_timer(2.0).timeout
	# Glyph discovery moved to fountain interaction

func get_scale_restrictions() -> Dictionary:
	return { \"micro\": true, \"macro\": false }
"

; === SCENE TREE ===
[node name="Room_1_1_3D" type="Node3D"]
script = SubResource("GDScript_room")

; --- ENVIRONMENT & LIGHTING ---
[node name="Environment" type="Node3D" parent="."]

[node name="WorldEnvironment" type="WorldEnvironment" parent="Environment"]

[node name="MainLight" type="DirectionalLight3D" parent="Environment"]
transform = Transform3D(0.866, -0.354, 0.354, 0, 0.707, 0.707, -0.5, -0.612, 0.612, 5, 10, 5)
light_color = Color(0.5, 0.55, 0.65, 1)
light_energy = 0.3
shadow_enabled = true

[node name="PortalLight" type="OmniLight3D" parent="Environment"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3, -4)
light_color = Color(0.2, 0.8, 0.9, 1)
light_energy = 4.0
omni_range = 15.0
omni_attenuation = 1.2

[node name="PoolLight" type="OmniLight3D" parent="Environment"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)
light_color = Color(0.15, 0.6, 0.75, 1)
light_energy = 2.0
omni_range = 6.0
omni_attenuation = 1.2

[node name="AmbientFill" type="DirectionalLight3D" parent="Environment"]
transform = Transform3D(1, 0, 0, 0, 0.5, 0.866, 0, -0.866, 0.5, 0, 5, 0)
light_color = Color(0.25, 0.3, 0.4, 1)
light_energy = 0.2

; --- FLOOR ---
[node name="Floor" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.25, 0)
collision_layer = 1

[node name="Mesh" type="MeshInstance3D" parent="Floor"]
mesh = SubResource("Mesh_floor")
surface_material_override/0 = SubResource("Mat_floor")

[node name="Collision" type="CollisionShape3D" parent="Floor"]
shape = SubResource("BoxShape3D_floor")

; --- FLOOR CIRCUIT PATTERNS (Divine Beast Style) - RAISED ---
[node name="FloorCircuits" type="Node3D" parent="."]

[node name="Circuit1" type="CSGBox3D" parent="FloorCircuits"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3, 0.02, 0)
size = Vector3(0.1, 0.04, 6)
material = SubResource("Mat_circuit_dim")

[node name="Circuit2" type="CSGBox3D" parent="FloorCircuits"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3, 0.02, 0)
size = Vector3(0.1, 0.04, 6)
material = SubResource("Mat_circuit_dim")

[node name="Circuit3" type="CSGBox3D" parent="FloorCircuits"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.02, -3)
size = Vector3(8, 0.04, 0.1)
material = SubResource("Mat_circuit_glow")

[node name="CircuitToPortal" type="CSGBox3D" parent="FloorCircuits"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.02, -3.5)
size = Vector3(0.15, 0.04, 3)
material = SubResource("Mat_circuit_glow")

[node name="CircuitRing" type="CSGTorus3D" parent="FloorCircuits"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.02, 0)
inner_radius = 2.3
outer_radius = 2.5
ring_sides = 32
material = SubResource("Mat_circuit_glow")

[node name="CircuitRingOuter" type="CSGTorus3D" parent="FloorCircuits"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.02, 0)
inner_radius = 3.8
outer_radius = 4.0
ring_sides = 32
material = SubResource("Mat_circuit_dim")

; --- WALLS (Cave-like enclosure) ---
[node name="Walls" type="Node3D" parent="."]

[node name="BackWall" type="StaticBody3D" parent="Walls"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3, -5.4)
collision_layer = 3

[node name="Mesh" type="MeshInstance3D" parent="Walls/BackWall"]
mesh = SubResource("Mesh_wall_back")
surface_material_override/0 = SubResource("Mat_wall")

[node name="Collision" type="CollisionShape3D" parent="Walls/BackWall"]
shape = SubResource("BoxShape3D_wall_back")

[node name="LeftWall" type="StaticBody3D" parent="Walls"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6.4, 3, 0)
collision_layer = 3

[node name="Mesh" type="MeshInstance3D" parent="Walls/LeftWall"]
mesh = SubResource("Mesh_wall_side")
surface_material_override/0 = SubResource("Mat_wall")

[node name="Collision" type="CollisionShape3D" parent="Walls/LeftWall"]
shape = SubResource("BoxShape3D_wall_side")

[node name="RightWall" type="StaticBody3D" parent="Walls"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6.4, 3, 0)
collision_layer = 3

[node name="Mesh" type="MeshInstance3D" parent="Walls/RightWall"]
mesh = SubResource("Mesh_wall_side")
surface_material_override/0 = SubResource("Mat_wall")

[node name="Collision" type="CollisionShape3D" parent="Walls/RightWall"]
shape = SubResource("BoxShape3D_wall_side")

; --- EXIT ARCHWAY (The glowing portal doorway) ---
[node name="ExitArchway" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -5)

; Arch pillars
[node name="LeftPillar" type="CSGBox3D" parent="ExitArchway"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, 2.5, 0)
size = Vector3(1.2, 5, 1.2)
material = SubResource("Mat_arch")

[node name="RightPillar" type="CSGBox3D" parent="ExitArchway"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2, 2.5, 0)
size = Vector3(1.2, 5, 1.2)
material = SubResource("Mat_arch")

; Arch top
[node name="ArchTop" type="CSGBox3D" parent="ExitArchway"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 5.3, 0)
size = Vector3(5.2, 1, 1.2)
material = SubResource("Mat_arch")

; Glowing portal surface (the exit)
[node name="PortalGlow" type="CSGBox3D" parent="ExitArchway"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.5, 0.3)
size = Vector3(2.6, 4.5, 0.1)
material = SubResource("Mat_portal_glow")

; Portal frame glow
[node name="FrameGlowLeft" type="CSGBox3D" parent="ExitArchway"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.35, 2.5, 0.5)
size = Vector3(0.1, 4.2, 0.05)
material = SubResource("Mat_circuit_glow")

[node name="FrameGlowRight" type="CSGBox3D" parent="ExitArchway"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.35, 2.5, 0.5)
size = Vector3(0.1, 4.2, 0.05)
material = SubResource("Mat_circuit_glow")

[node name="FrameGlowTop" type="CSGBox3D" parent="ExitArchway"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4.8, 0.5)
size = Vector3(2.8, 0.1, 0.05)
material = SubResource("Mat_circuit_glow")

; Inner ring decoration
[node name="InnerRing" type="CSGTorus3D" parent="ExitArchway"]
transform = Transform3D(1, 0, 0, 0, 0, -1, 0, 1, 0, 0, 2.5, 0.4)
inner_radius = 1.0
outer_radius = 1.2
ring_sides = 24
material = SubResource("Mat_circuit_glow")

; --- DECORATIVE PILLARS ---
[node name="Pillars" type="Node3D" parent="."]

[node name="PillarFL" type="StaticBody3D" parent="Pillars"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.5, 2, -2)
collision_layer = 2

[node name="Mesh" type="MeshInstance3D" parent="Pillars/PillarFL"]
mesh = SubResource("Mesh_pillar")
surface_material_override/0 = SubResource("Mat_pillar")

[node name="Collision" type="CollisionShape3D" parent="Pillars/PillarFL"]
shape = SubResource("BoxShape3D_pillar")

[node name="Circuit" type="CSGBox3D" parent="Pillars/PillarFL"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.35)
size = Vector3(0.1, 3.5, 0.05)
material = SubResource("Mat_circuit_dim")

[node name="PillarFR" type="StaticBody3D" parent="Pillars"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.5, 2, -2)
collision_layer = 2

[node name="Mesh" type="MeshInstance3D" parent="Pillars/PillarFR"]
mesh = SubResource("Mesh_pillar")
surface_material_override/0 = SubResource("Mat_pillar")

[node name="Collision" type="CollisionShape3D" parent="Pillars/PillarFR"]
shape = SubResource("BoxShape3D_pillar")

[node name="Circuit" type="CSGBox3D" parent="Pillars/PillarFR"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.35)
size = Vector3(0.1, 3.5, 0.05)
material = SubResource("Mat_circuit_dim")

; --- CENTRAL FOUNTAIN POOL (Interactive - reveals glyph) ---
[node name="FountainPool" type="StaticBody3D" parent="."]
collision_layer = 2
collision_mask = 0
script = ExtResource("3_fountain")

[node name="PoolRim" type="CSGTorus3D" parent="FountainPool"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.15, 0)
inner_radius = 1.8
outer_radius = 2.2
ring_sides = 32
material = SubResource("Mat_pool_rim")

[node name="PoolBase" type="CSGCylinder3D" parent="FountainPool"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.15, 0)
radius = 1.8
height = 0.3
material = SubResource("Mat_floor")

[node name="Water" type="CSGCylinder3D" parent="FountainPool"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.05, 0)
radius = 1.7
height = 0.1
material = SubResource("Mat_water")

[node name="FountainCenter" type="CSGCylinder3D" parent="FountainPool"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.3, 0)
radius = 0.15
height = 0.6
material = SubResource("Mat_pool_rim")

[node name="FountainTop" type="CSGSphere3D" parent="FountainPool"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.65, 0)
radius = 0.2
material = SubResource("Mat_circuit_glow")

[node name="Collision" type="CollisionShape3D" parent="FountainPool"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)
shape = SubResource("CylinderShape3D_pool")

; Interaction area for player detection
[node name="InteractArea" type="Area3D" parent="FountainPool"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)
collision_layer = 6
collision_mask = 0

[node name="InteractCollision" type="CollisionShape3D" parent="FountainPool/InteractArea"]
shape = SubResource("CylinderShape3D_pool")

; Glyph display (hidden until interaction)
[node name="GlyphDisplay" type="Node3D" parent="FountainPool"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.5, 0)

[node name="GlyphPlate" type="CSGCylinder3D" parent="FountainPool/GlyphDisplay"]
radius = 0.5
height = 0.08
material = SubResource("Mat_circuit_glow")

; --- BOULDERS / ROCKS (like concept art) ---
[node name="Boulders" type="Node3D" parent="."]

[node name="Boulder1" type="StaticBody3D" parent="Boulders"]
transform = Transform3D(1.3, 0, 0, 0, 1.1, 0, 0, 0, 1.2, -4.5, 0.5, 2)
collision_layer = 2

[node name="Mesh" type="MeshInstance3D" parent="Boulders/Boulder1"]
mesh = SubResource("Mesh_boulder")
surface_material_override/0 = SubResource("Mat_boulder")

[node name="Collision" type="CollisionShape3D" parent="Boulders/Boulder1"]
shape = SubResource("BoxShape3D_boulder")

[node name="Boulder2" type="StaticBody3D" parent="Boulders"]
transform = Transform3D(1.0, 0, 0, 0, 0.9, 0, 0, 0, 1.1, -3.8, 0.35, 3.2)
collision_layer = 2

[node name="Mesh" type="MeshInstance3D" parent="Boulders/Boulder2"]
mesh = SubResource("Mesh_boulder")
surface_material_override/0 = SubResource("Mat_boulder")

[node name="Collision" type="CollisionShape3D" parent="Boulders/Boulder2"]
shape = SubResource("BoxShape3D_boulder")

[node name="Boulder3" type="StaticBody3D" parent="Boulders"]
transform = Transform3D(1.2, 0, 0, 0, 1.0, 0, 0, 0, 1.3, 4.8, 0.45, 2.2)
collision_layer = 2

[node name="Mesh" type="MeshInstance3D" parent="Boulders/Boulder3"]
mesh = SubResource("Mesh_boulder")
surface_material_override/0 = SubResource("Mat_boulder")

[node name="Collision" type="CollisionShape3D" parent="Boulders/Boulder3"]
shape = SubResource("BoxShape3D_boulder")

[node name="Boulder4" type="StaticBody3D" parent="Boulders"]
transform = Transform3D(0.8, 0, 0, 0, 0.7, 0, 0, 0, 0.9, 4.2, 0.3, 3.5)
collision_layer = 2

[node name="Mesh" type="MeshInstance3D" parent="Boulders/Boulder4"]
mesh = SubResource("Mesh_boulder")
surface_material_override/0 = SubResource("Mat_boulder")

[node name="Collision" type="CollisionShape3D" parent="Boulders/Boulder4"]
shape = SubResource("BoxShape3D_boulder")

[node name="Boulder5" type="StaticBody3D" parent="Boulders"]
transform = Transform3D(0.9, 0, 0, 0, 0.8, 0, 0, 0, 1.0, -5.2, 0.35, 0)
collision_layer = 2

[node name="Mesh" type="MeshInstance3D" parent="Boulders/Boulder5"]
mesh = SubResource("Mesh_boulder")
surface_material_override/0 = SubResource("Mat_boulder")

[node name="Collision" type="CollisionShape3D" parent="Boulders/Boulder5"]
shape = SubResource("BoxShape3D_boulder")

[node name="Boulder6" type="StaticBody3D" parent="Boulders"]
transform = Transform3D(0.85, 0, 0, 0, 0.75, 0, 0, 0, 0.95, 5.0, 0.32, 0.5)
collision_layer = 2

[node name="Mesh" type="MeshInstance3D" parent="Boulders/Boulder6"]
mesh = SubResource("Mesh_boulder")
surface_material_override/0 = SubResource("Mat_boulder")

[node name="Collision" type="CollisionShape3D" parent="Boulders/Boulder6"]
shape = SubResource("BoxShape3D_boulder")

; --- BLOCKING BOULDER (pushable to clear exit) ---
[node name="BlockingBoulder" type="CharacterBody3D" parent="Boulders"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -3.5)
collision_layer = 3
collision_mask = 3
script = ExtResource("2_block")

[node name="Mesh" type="CSGSphere3D" parent="Boulders/BlockingBoulder"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.7, 0)
radius = 0.9
material = SubResource("Mat_boulder")

[node name="Collision" type="CollisionShape3D" parent="Boulders/BlockingBoulder"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.7, 0)
shape = SubResource("BoxShape3D_boulder")

; --- DIVINE BEAST METAL GROOVES ---
[node name="MetalGrooves" type="Node3D" parent="."]

; Left wall metal panel
[node name="LeftPanel" type="CSGBox3D" parent="MetalGrooves"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5.9, 2.5, -1)
size = Vector3(0.1, 2.5, 3)
material = SubResource("Mat_pillar")

[node name="LeftGroove1" type="CSGBox3D" parent="MetalGrooves"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5.85, 2.5, -1.5)
size = Vector3(0.08, 2.2, 0.08)
material = SubResource("Mat_circuit_dim")

[node name="LeftGroove2" type="CSGBox3D" parent="MetalGrooves"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5.85, 2.5, -0.5)
size = Vector3(0.08, 2.2, 0.08)
material = SubResource("Mat_circuit_dim")

[node name="LeftGroove3" type="CSGBox3D" parent="MetalGrooves"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5.85, 3.5, -1)
size = Vector3(0.08, 0.08, 2.8)
material = SubResource("Mat_circuit_dim")

[node name="LeftGroove4" type="CSGBox3D" parent="MetalGrooves"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5.85, 1.5, -1)
size = Vector3(0.08, 0.08, 2.8)
material = SubResource("Mat_circuit_dim")

; Right wall metal panel
[node name="RightPanel" type="CSGBox3D" parent="MetalGrooves"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.9, 2.5, -1)
size = Vector3(0.1, 2.5, 3)
material = SubResource("Mat_pillar")

[node name="RightGroove1" type="CSGBox3D" parent="MetalGrooves"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.85, 2.5, -1.5)
size = Vector3(0.08, 2.2, 0.08)
material = SubResource("Mat_circuit_dim")

[node name="RightGroove2" type="CSGBox3D" parent="MetalGrooves"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.85, 2.5, -0.5)
size = Vector3(0.08, 2.2, 0.08)
material = SubResource("Mat_circuit_dim")

[node name="RightGroove3" type="CSGBox3D" parent="MetalGrooves"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.85, 3.5, -1)
size = Vector3(0.08, 0.08, 2.8)
material = SubResource("Mat_circuit_dim")

[node name="RightGroove4" type="CSGBox3D" parent="MetalGrooves"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.85, 1.5, -1)
size = Vector3(0.08, 0.08, 2.8)
material = SubResource("Mat_circuit_dim")

; Back wall metal panels near archway
[node name="BackPanelL" type="CSGBox3D" parent="MetalGrooves"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4, 2.5, -5)
size = Vector3(1.5, 2.5, 0.1)
material = SubResource("Mat_pillar")

[node name="BackGrooveL1" type="CSGBox3D" parent="MetalGrooves"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.3, 2.5, -4.95)
size = Vector3(0.08, 2.2, 0.08)
material = SubResource("Mat_circuit_dim")

[node name="BackGrooveL2" type="CSGBox3D" parent="MetalGrooves"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.7, 2.5, -4.95)
size = Vector3(0.08, 2.2, 0.08)
material = SubResource("Mat_circuit_dim")

[node name="BackPanelR" type="CSGBox3D" parent="MetalGrooves"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 2.5, -5)
size = Vector3(1.5, 2.5, 0.1)
material = SubResource("Mat_pillar")

[node name="BackGrooveR1" type="CSGBox3D" parent="MetalGrooves"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.3, 2.5, -4.95)
size = Vector3(0.08, 2.2, 0.08)
material = SubResource("Mat_circuit_dim")

[node name="BackGrooveR2" type="CSGBox3D" parent="MetalGrooves"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.7, 2.5, -4.95)
size = Vector3(0.08, 2.2, 0.08)
material = SubResource("Mat_circuit_dim")

; --- PUSHABLE BLOCK ---
[node name="PushableBlock" type="CharacterBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3, 0, 1)
collision_layer = 3
collision_mask = 3
script = ExtResource("2_block")

[node name="Mesh" type="CSGBox3D" parent="PushableBlock"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.4, 0)
size = Vector3(0.8, 0.8, 0.8)
material = SubResource("Mat_block")

[node name="CircuitDecor" type="CSGBox3D" parent="PushableBlock"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.4, -0.41)
size = Vector3(0.5, 0.5, 0.02)
material = SubResource("Mat_circuit_dim")

[node name="Collision" type="CollisionShape3D" parent="PushableBlock"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.4, 0)
shape = SubResource("BoxShape3D_block")

; --- WALL CIRCUIT DECORATIONS ---
[node name="WallCircuits" type="Node3D" parent="."]

[node name="LeftWallCircuit1" type="CSGBox3D" parent="WallCircuits"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5.95, 2, -2)
size = Vector3(0.05, 3, 0.12)
material = SubResource("Mat_circuit_dim")

[node name="LeftWallCircuit2" type="CSGBox3D" parent="WallCircuits"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5.95, 2, 1)
size = Vector3(0.05, 2.5, 0.12)
material = SubResource("Mat_circuit_dim")

[node name="RightWallCircuit1" type="CSGBox3D" parent="WallCircuits"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.95, 2, -2)
size = Vector3(0.05, 3, 0.12)
material = SubResource("Mat_circuit_dim")

[node name="RightWallCircuit2" type="CSGBox3D" parent="WallCircuits"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.95, 2, 1)
size = Vector3(0.05, 2.5, 0.12)
material = SubResource("Mat_circuit_dim")

; --- SPAWN & PLAYER ---
[node name="SpawnPoint" type="Marker3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 3)

[node name="Player3D" parent="." instance=ExtResource("1_player")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 3)

; --- UI ---
[node name="UI" type="CanvasLayer" parent="."]

[node name="RoomTitle" type="Label" parent="UI"]
offset_left = 400.0
offset_top = 20.0
offset_right = 880.0
offset_bottom = 60.0
horizontal_alignment = 1
text = "The Awakening Chamber"

[node name="Hint" type="Label" parent="UI"]
offset_left = 400.0
offset_top = 65.0
offset_right = 880.0
offset_bottom = 95.0
horizontal_alignment = 1
text = "A glowing archway beckons forward..."

[node name="Controls" type="Label" parent="UI"]
offset_left = 20.0
offset_top = 680.0
offset_right = 600.0
offset_bottom = 710.0
text = "WASD: Move | E: Interact | SHIFT: Scale (on pedestal) | Q: Notebook"

[node name="ScaleIndicator" type="Label" parent="UI"]
offset_left = 20.0
offset_top = 20.0
offset_right = 200.0
offset_bottom = 50.0
text = "Scale: NORMAL"
